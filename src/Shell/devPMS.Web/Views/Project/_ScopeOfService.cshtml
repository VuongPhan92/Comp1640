@model List<devPMS.Data.ScopeOfService> 
@{
    // just for demo purpose
    List<string> Categories = new List<string> { "Product Take-Off", "Product Design", "Product Development", "Truss Service", "Software Development" };
    int imageId = 0;
}
<div class="row">
    <center>
        @foreach (var category in Model.GroupBy(p => p.CategoryId))
        {
            <div class="col-md-6">
                <div class=" box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">@Categories[category.Key.Value - 1]</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            @foreach (var scope in category)
                            {
                                <div class="col-md-6">
                                    <div class="box-header with-border ">
                                        <h4 class="box-title">
                                            <a data-toggle="collapse" data-parent="#accordion" href="#@scope.ID">
                                                @scope.ScopeName
                                            </a>
                                        </h4>
                                    </div>
                                    <div id=@scope.ID class="panel-collapse collapse in ">
                                        <div class="box-body">
                                            <a href="#" onclick="ServiceSelected(@scope.ID, '@scope.ScopeName'); " class="portfolio-box">
                                                @{
                                                    ++imageId;
                                                    if (imageId > 10) { imageId = 1; }
                                                 }
                                                <img src="~/images/ServiceImages/@imageId .jpeg" class="img-responsive" alt="">
                                                <div class="portfolio-box-caption">
                                                    <div class="portfolio-box-caption-content">
                                                        <div class="project-category text-faded">
                                                            @scope.ScopeName
                                                        </div>
                                                        <div class="project-name">
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    </center>
</div>